<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AJAX</title>
</head>
<body>
  <h1>Learn AJAX</h1>
  <div id="output"></div>
  <button id="trigger">Get a Joke</button>
  <script type="text/javascript">

    var joker = document.querySelector('#trigger');
    joker.addEventListener('click',loadJoke);

    function loadJoke(){
      const url = 'https://api.chucknorris.io/jokes/random';

      fetch(url)
        .then(resJson)
        .then(json => document.querySelector('#output').innerHTML = '<div><img src="'+json.icon_url+'">'+json.value+'</div>')
        .catch(error => console.log(error));

      function resJson(response){
        return response.json();
      }

      // fetch(url).then(function(response){
      //   console.log(response.headers.get('Content-Type'));
      //   console.log(response.headers.get('Date'));
      //   console.log(response.type);
      //   if(response.status != 200){
      //     console.log('Oops, not connected: '+response.status);
      //   }
      //   return response.json();
      // }).then(function(json){
      //   console.log(json);
      //   let html = '<div><img src="'+json.icon_url+'">'+json.value+'</div>'
      //   document.querySelector('#output').innerHTML = html;
      // }).catch(function(error){
      //   console.log(error);
      // });

      // fetch('simple.txt').then(function(response){
      //   return response.text();
      // }).then(function(text){
      //   console.log(text);
      // });
    };

  </script>
</body>
</html>